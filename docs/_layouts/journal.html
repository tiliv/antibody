---
layout: root
comment: The page should supply `title` and `date`

data:
  git: [blame, paragraphs, history]
---

{%- comment -%} Contact with explicit md treatment from template {%- endcomment -%}
{%- capture contact_template -%}
contact/{{ page.author | slugify }}.md
{%- endcapture -%}
{%- capture contact_md -%}
{%- capture contact_subject -%}
{{- page.contact_subject | default: page.title -}}
{%- endcapture -%}
{%- include {{ contact_template }}
  subject=contact_subject
  mailto=page.contact_email -%}
{%- endcapture -%}
{%- capture contact_html -%}
{{- contact_md | markdownify -}}
{%- endcapture -%}

{%- assign data_key = page.path | replace: "/", "" | replace: ".md", "" -%}
{%- for kind in layout.data.git -%}
{%- assign data = site.data.git[kind][data_key] %}
<script id="{{ kind }}" type="application/json">{{ data | jsonify }}</script>
{% endfor %}

<h2 class="journal-font" aria-describe="Headline:">{{ page.title }}</h2>
{% if page.re %}
<div id="re">
  <a href="{{ page.re }}" rel="noopener">{{ page.re }}</a>
</div>
{% endif %}
<div id="by-line">
  {% include tags.html piece=page %}
  {% include duration.html piece=page %}
  <code class="date">
    <time datetime="{{ page.date | date_to_xmlschema }}">{{ page.date | date: "%G-W%V: %B %-d" }}</time>
  </code>
  {% include change-stack.html piece=page %}
</div>
<div id="layout">
  <article class="content">
    {%- if page.contact_top -%}
      {{ contact_html }}
    {%- endif -%}
    {{ content }}
    <hr />
    {{ contact_html }}
  </article>
</div>

<div
  id="quote-tip"
  class="tooltip"
  role="status"
  aria-live="polite"></div>
<div
  class="visually-hidden"
  aria-live="polite"
  aria-atomic="true"
  id="quote-live"></div>
